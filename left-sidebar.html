<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="assets/css/main.css" />
    <title>Playlist</title>
</head>
<body class="is-preload">
    <!-- ... (Altri elementi HTML come header e nav) ... -->

    <section id="main">
    <div class="container">
        <div class="row">
            <!-- ... (Colonne della pagina) ... -->

            <div id="video">
                <h1>Playlist di YouTube</h1>
                <form id="video-form">
                    <label for="videoId">Inserisci l'ID del video YouTube:</label>
                    <input type="text" id="videoId" placeholder="Inserisci l'ID del video" required>
                    <button type="submit">Cerca e ottieni le metriche</button>
                </form>
                <ul id="playlistList"></ul>

                <canvas id="myChart" width="400" height="400"></canvas>
            </div>
        </div>
    </div>
</section>

    <!-- ... (Altri elementi HTML come footer e scripts) ... -->

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        document.getElementById("video-form").addEventListener("submit", function (e) {
            e.preventDefault();
            const videoId = document.getElementById("videoId").value;
            fetch(`https://youtube.googleapis.com/youtube/v3/videos?part=snippet%2CcontentDetails%2Cstatistics&id=Ks-_Mh1QhMc%2Cc0KYU2j0TM4%2CeIho2S0ZahI&key=AIzaSyAjvgjAILjhg4tL3e713tEm2AUr2k5d9Nc`)
                .then((response) => response.json())
                .then((data) => {
                    const video = {
                        subscribers: data.items[0].statistics.subscriberCount,
                        views: data.items[0].statistics.viewCount,
                        videos: data.items[0].statistics.videoCount,
                    };

                    // Visualizza le metriche nel div "video"
                    const videoElement = document.getElementById("video");
                    videoElement.innerHTML = `
                        <p>Numero di iscritti: ${video.subscribers}</p>
                        <p>Numero di visualizzazioni: ${video.views}</p>
                        <p>Numero di video: ${video.videos}</p>
                    `;

                    // Crea il grafico con le nuove metriche
                    const ctx = document.getElementById('myChart').getContext('2d');
                    const data = {
                        labels: ['Iscritti', 'Visualizzazioni', 'Video'],
                        datasets: [{
                            label: 'Metriche YouTube',
                            data: [video.subscribers, video.views, video.videos],
                            backgroundColor: [
                                'red',
                                'blue',
                                'green',
                            ],
                            borderColor: [
                                'red',
                                'blue',
                                'green',
                            ],
                            borderWidth: 1
                        }]
                    };

                    const options = {
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        }
                    };

                    new Chart(ctx, {
                        type: 'bar',
                        data: data,
                        options: options
                    });
                })
                .catch((error) => {
                    console.error("Si Ã¨ verificato un errore durante la richiesta API:", error);
                });
        });
    </script>
</body>
</html>
