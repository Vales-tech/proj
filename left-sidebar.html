<!DOCTYPE html> 
<!--
	TXT by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html lang="en">

	<head> 
		<meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" href="assets/css/main.css" />
		<title>Video Popolari su YouTube</title>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
	</head> 
<body class="is-preload">	
<!-- Header -->
		<header id="header">
			<div class="logo container">
				<div>
					<h1><a href="index.html" id="logo">Playlist</a></h1>
					<p>boh</p>
				</div>
			</div>
		</header>

		<!-- Nav -->
		<nav id="nav">
			<ul>
				<li class="current"><a href="index.html">Home</a></li>
				<li><a href="left-sidebar.html">Form</a></li>
				<li><a href="right-sidebar.html">Contatti</a></li>
			</ul>
		</nav>

		<!-- Main -->
		<section id="main">
			<div class="container">
				<div class="row">
					<div class="col-3 col-12-medium">
						<div class="sidebar"> 
							<!-- Sidebar -->
							<section>
								<h2 class="major"><span>Ipsum Dolore</span></h2>
								<ul>
									<li>Film e animazione: 1</li>
									<li>Auto e veicoli: 2</li>
									<li>Musica: 10</li>
									<li>Animali: 15</li>
									<li>Sport: 17</li>
									<li>Viaggi ed eventi: 19</li>
									<li>Videogiochi: 20</li>
									<li>Scienza e tecnologia: 28</li>
								</ul>
								<a href="#" class="button alt">Learn more</a>
							</section> 
						</div>
					</div>
					<div class="col-9 col-12-medium imp-medium">
						<div class="content">
							<!-- Content -->
							<article class="box page-content">
								<header>
									<h2>Left Sidebar</h2>
									<p>Semper amet scelerisque metus faucibus morbi congue mattis</p>
									<ul class="meta">
										<li class="icon fa-clock">5 days ago</li>
										<li class="icon fa-comments"><a href="#">1,024</a></li>
									</ul>
								</header>
								<section>
									<span class="image featured"><img src="images/pic05.jpg" alt="" /></span>
									<p>
										<div id="video">
											<!-- Qui verranno visualizzati i dettagli del video -->
										</div>
									</p>
								</section>
					    <h1>Video Popolari su YouTube</h1>
					    
					    <label for="regionCode">Seleziona un Paese:</label>
					    <select id="regionCode">
					        <option value="US">Stati Uniti</option>
					        <option value="CA">Canada</option>
					        <option value="IT">Italia</option>
					    </select> 
					    <input type="text" id="videoCategoryId" placeholder="Inserisci l'ID della categoria">
					    <button onclick="searchPopularVideos()">Cerca Video Popolari</button>
					    <ul id="videoList"></ul>
					    <canvas id="myChart" width="400" height="400"></canvas>
    <!-- Copyright -->
				<div id="copyright">
					<ul class="menu">
						<li>&copy; Untitled. All rights reserved</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
					</ul>
				</div>
			</div>
		</footer>

		<!-- Scripts -->
		<script src="assets/js/jquery.min.js"></script>
		<script src="assets/js/jquery.dropotron.min.js"></script>
		<script src="assets/js/jquery.scrolly.min.js"></script>
		<script src="assets/js/browser.min.js"></script>
		<script src="assets/js/breakpoints.min.js"></script>
		<script src="assets/js/util.js"></script> 
		<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        function searchPopularVideos() {
            const regionCode = document.getElementById("regionCode").value;
            const videoCategoryId = document.getElementById("videoCategoryId").value;
            const apiKey = "AIzaSyAjvgjAILjhg4tL3e713tEm2AUr2k5d9Nc"; 

            fetch(`https://www.googleapis.com/youtube/v3/videos?part=snippet&chart=mostPopular&regionCode=${regionCode}&videoCategoryId=${videoCategoryId}&maxResults=10&key=AIzaSyAjvgjAILjhg4tL3e713tEm2AUr2k5d9Nc`)
                .then(response => response.json())
                .then(data => {
                    if (data.items && data.items.length > 0) {
                        const videos = data.items;
                        const videoList = document.getElementById("videoList");
                        videoList.innerHTML = "";

                        videos.forEach(video => {
                            const videoTitle = video.snippet.title;
                            const videoId = video.id;
                            const videoLink = `https://www.youtube.com/watch?v=${videoId}`;
                            videoList.innerHTML += `<li><a href="${videoLink}" target="_blank">${videoTitle}</a></li>`;
                        });

                        // Crea il grafico
                        createChart(videos);
                    } else {
                        console.error("Nessun video trovato.");
                    }
                })
                .catch(error => {
                    console.error("Si Ã¨ verificato un errore durante la ricerca dei video:", error);
                });
        }

        function createChart(videos) {
            const videoTitles = videos.map(video => video.snippet.title);
            const videoViews = videos.map(video => video.statistics.viewCount);

            const ctx = document.getElementById("myChart").getContext("2d");
            new Chart(ctx, {
                type: "bar",
                data: {
                    labels: videoTitles,
                    datasets: [{
                        label: "Visualizzazioni",
                        data: videoViews,
                        backgroundColor: "rgba(75, 192, 192, 0.2)",
                        borderColor: "rgba(75, 192, 192, 1)",
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }
    </script>
								
</body>
</html>
