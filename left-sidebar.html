<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="assets/css/main.css" />
    <title>Video Popolari su YouTube</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body class="is-preload">
    <!-- Header -->
    <header id="header">
        <div class="logo container">
            <div>
                <h1><a href="index.html" id="logo">Lista</a></h1>
                <p>dei video popolari su YouTube</p>
            </div>
        </div>
    </header>

    <!-- Nav -->
    <nav id="nav">
        <ul>
            <li class="current"><a href="index.html">Home</a></li>
            <li><a href="left-sidebar.html">Form</a></li>
            <li><a href="right-sidebar.html">Contatti</a></li>
        </ul>
    </nav>

    <!-- Main -->
    <section id="main">
        <div class="container">
            <div class="row">
                <div class="col-3 col-12-medium">
                    <div class="sidebar">
                        <!-- Left-Sidebar -->
                        <!-- Recent Posts -->
                        <section>
                            <h2 class="major"><span>Recent Posts</span></h2>
                            <ul class="divided">
                            <p>
                                Visualizza i video più popolari per ogni paese e scopri se rinetri tra i primi dieci nel tuo paese.
                            </p>
                                <!-- Recent posts here -->
                            </ul>
                            <a href="#" class="button alt">Archives</a>
                        </section>
 
                        <section>
                            <h2 class="major"><span>Ipsum Dolore</span></h2>
                            <a href="#" class="image featured"><img src="images/pic03.jpg" alt="" /></a>
                            <p>
                                Donec sagittis massa et leo semper scele risque metus faucibus. Morbi congue mattis mi.
                                Phasellus sed nisl vitae risus tristique volutpat. Cras rutrum sed commodo luctus blandit.
                            </p>
                            <a href="#" class="button alt">Learn more</a>
                        </section>
 
                        <section>
                            <h2 class="major"><span>Magna Feugiat</span></h2>
                            <p>
                                Rhoncus dui quis euismod. Maecenas lorem tellus, congue et condimentum ac, ullamcorper non sapien.
                                Donec sagittis massa et leo semper scele risque metus faucibus. Morbi congue mattis mi.
                                Phasellus sed nisl vitae risus tristique volutpat. Cras rutrum sed commodo luctus blandit.
                            </p>
                            <a href="#" class="button alt">Learn more</a>
                        </section>
                    </div>
                </div>
                <div class="col-9 col-12-medium imp-medium">
                    <div class="content">
                        <!-- Content -->
                        <article class="box page-content">
                            <header>
                                <section>
                                    <label for="regionCode">Seleziona un Paese:</label>
                                    <select id="regionCode">
                                        <option value="IT">Italia</option>
                                        <option value="US">Stati Uniti</option>
                                        <option value="JP">Giappone</option>
                                        <option value="ES">Spagna</option>
                                        <option value="Fr">Francia</option>
                                        <option value="CN">Cina</option>
                                </select>
                                    <br>
                                    <br>
                                    <label for="videoCategoryId">Seleziona una Categoria:</label>
                                    <select id="videoCategoryId">
                                        <option value="1">Film e animazione</option>
                                        <option value="17">Sport</option>
                                        <option value="20">Videogiochi</option>
                                        <option value="28">Scienza e tecnologia</option>
                                        <option value="10">Musica</option> 
                                        <option value="15">Animali</option> 
                                        <option value="19">Viaggi ed eventi</option> 
                                        <option value="27">Istruzione</option> 
                                        <option value="29">Non profit e attivismo</option>   
                                    </select>
                                    <br>
                                    <br>
                                    <button onclick="searchPopularVideos()">Cerca Video Popolari</button>
                                </section> 
                            </section>
                        </header>
                        </article>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer id="footer">
        <div id="copyright">
            <ul class="menu">
                <li>&copy; Untitled. All rights reserved</li>
                <li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
            </ul>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/jquery.dropotron.min.js"></script>
    <script src="assets/js/jquery.scrolly.min.js"></script>
    <script src="assets/js/browser.min.js"></script>
    <script src="assets/js/breakpoints.min.js"></script>
    <script src="assets/js/util.js"></script>
    <script>
        function searchPopularVideos() {
            const regionCode = document.getElementById("regionCode").value;
            const videoCategoryId = document.getElementById("videoCategoryId").value;
            const videoCategoryName = document.getElementById("videoCategoryName").value;
            const apiKey = "AIzaSyAjvgjAILjhg4tL3e713tEm2AUr2k5d9Nc"; 

            fetch(`https://www.googleapis.com/youtube/v3/videos?part=snippet&chart=mostPopular&regionCode=${regionCode}&videoCategoryId=${videoCategoryId}&maxResults=10&key=AIzaSyAjvgjAILjhg4tL3e713tEm2AUr2k5d9Nc`)
                .then(response => response.json())
                .then(data => {
                    if (data.items && data.items.length > 0) {
                        const videos = data.items;
                        const videoList = document.getElementById("videoList");
                        videoList.innerHTML = "";

                        videos.forEach(video => {
                            const videoTitle = video.snippet.title;
                            const videoId = video.id;
                            const videoLink = `https://www.youtube.com/watch?v=${videoId}`;
                            videoList.innerHTML += `<li><a href="${videoLink}" target="_blank">${videoTitle}</a></li>`;
                        });
                    } else {
                        console.error("Nessun video trovato.");
                    }
                })
                .catch(error => {
                    console.error("Si è verificato un errore durante la ricerca dei video:", error);
                });
        }
    </script>
</body>

</html>
